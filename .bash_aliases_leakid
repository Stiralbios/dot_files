#######################
# alias for LeakID    #
#######################

# generic
alias lk__google_dns="nmcli con mod leakid ipv4.dns '8.8.8.8 8.8.4.4';  nmcli con down leakid; nmcli con up leakid;"
alias lk__own_dns="nmcli con mod leakid ipv4.dns '51.15.161.15';  nmcli con down leakid; nmcli con up leakid;"

function desactivate_ipv6 {
    sysctl -w net.ipv6.conf.all.disable_ipv6=1
    sysctl -w net.ipv6.conf.all.autoconf=0
    sysctl -w net.ipv6.conf.default.disable_ipv6=1
    sysctl -w net.ipv6.conf.default.autoconf=0
}

function activate_ipv6 {
    sysctl -w net.ipv6.conf.all.disable_ipv6=0
    sysctl -w net.ipv6.conf.all.autoconf=1
    sysctl -w net.ipv6.conf.default.disable_ipv6=0
    sysctl -w net.ipv6.conf.default.autoconf=1
}



# alias for leaksearch
alias lksearch__venv="source ~/Sources/Work/LeakID/leaksearch_python/venv2/bin/activate; export PYTHONPATH='/home/astyan/Sources/Work/LeakID/leaksearch_python'"

function lksearch__tools_build {
    lksearch__venv; 
    find ~/Sources/Work/LeakID/leaksearch_python -name '*.pyc' -delete; python ~/Sources/Work/LeakID/leaksearch_python/tools.py --build --debug
}

function lksearch__tools_generate_module {
    lksearch__venv; 
    python ~/Sources/Work/LeakID/leaksearch_python/tools.py --generate_module;
}                                    

function lksearch__test_link {
    lksearch__venv
    python  ~/Sources/Work/LeakID/leaksearch_python/test_link.py --all --debug -r "$@"
}

function lksearch__test_search {
    lksearch__venv
    python ~/Sources/Work/LeakID/leaksearch_python/test_search.py "$@"
}

function lksearch__add_webroach {
    lksearch__venv
    cd ~/Sources/Work/LeakID/leaksearch_python
    python -m web_crawling.web_crawlers.web_roach_manager --debug --add_web_roach_website --url "$@"
    cd -
}

function lksearch__test_webroach {
    lksearch__venv
    cd ~/Sources/Work/LeakID/leaksearch_python
    python -m tasks.generator.generate_web_roach --flock --debug --start_task_locally -w "$@"
    cd -
}

function lksearch__run_api_server {
    lksearch__venv
    printf "\e]2;lksearch_run_api_server\a"
# cd to have the right path if config files are needed
    cd ~/Sources/Work/LeakID/leaksearch_python
    export DEVELOPMENT=1 && gunicorn api:app -w 1 --threads 12 -b '127.0.0.1:5000' --reload
    # export DEVELOPMENT=1 && python ./tools.py --debug --dmysql --run_api_server    
}

alias lksearch__run_swagger_api="docker run -d --name leaksearch_swagger_api -p 8081:8080 -v ~/Sources/Work/LeakID/leaksearch_python/api:/api -e SWAGGER_JSON=/api/swagger.yml swaggerapi/swagger-ui"
alias lksearch__stop_swaggerapi="docker stop leaksearch_swagger_api"

# lk-content-id
alias lkcontentid__venv="source ~/Sources/Work/LeakID/lk-content-id/venv/bin/activate; export PYTHONPATH='/home/astyan/Sources/Work/LeakID/lk-content-id'"

function lkcontentid__run_frontend {
    lkcontentid__venv
    printf "\e]2;lkcontentid_run_frontend\a"
# cd to have the right path if config files are needed
    cd ~/Sources/Work/LeakID/lk-content-id
    python ./run_frontend.py &
    sleep 5
    chromium http://127.0.0.1:5001/
}


function lkcontentid__run_backend {
    lkcontentid__venv
    printf "\e]2;lkcontentid_run_backend\a"
# cd to have the right path if config files are needed
    cd ~/Sources/Work/LeakID/lk-content-id
    python ./run_backend.py
    # sleep 5
    # xdotool key ctrl+shift+t
}

